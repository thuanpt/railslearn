<% provide(:title, "Articles") %>

<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px;">
  <h1>üìù Articles</h1>
  <%= link_to "‚ûï New Article", new_article_path, class: "btn btn-primary" %>
</div>

<% if @articles.any? %>
  <div style="display: grid; gap: 20px;">
    <% @articles.each do |article| %>
      <div class="card">
        <div style="display: flex; justify-content: space-between; align-items: start;">
          <div style="flex: 1;">
            <h2 style="margin-top: 0;">
              <%= link_to article.title, article, style: "text-decoration: none;" %>
            </h2>
            
            <p style="color: var(--gray-500);">
              <%= truncate(article.body, length: 150) %>
            </p>
            
            <div style="margin-top: 15px; display: flex; gap: 10px; align-items: center; font-size: 0.9rem;">
              <% if article.published %>
                <span style="background: #d1fae5; color: #065f46; padding: 2px 8px; border-radius: 4px;">Published</span>
              <% else %>
                <span style="background: #fee2e2; color: #991b1b; padding: 2px 8px; border-radius: 4px;">Draft</span>
              <% end %>
              
              <div class="article-meta" style="color: #6b7280; font-size: 0.9rem; margin-bottom: 15px;">
            <span>By <strong><%= article.user&.name || "Unknown" %></strong></span> | 
            <span><%= time_ago_in_words(article.created_at) %> ago</span> |
            <span>Category: <%= article.category&.name || "None" %></span>
          </div>
          
          <div style="display: flex; gap: 10px; margin-left: 20px;">
            <%= link_to "View", article, class: "btn btn-secondary", style: "padding: 5px 10px; font-size: 0.9rem;" %>
            <%= link_to "Edit", edit_article_path(article), class: "btn btn-success", style: "padding: 5px 10px; font-size: 0.9rem;" %>
            <%= link_to "Delete", article, data: { turbo_method: :delete, turbo_confirm: "Are you sure?" }, class: "btn btn-danger", style: "padding: 5px 10px; font-size: 0.9rem;" %>
          </div>
        </div>
      </div>
    <% end %>
  </div>
<% else %>
  <div class="card" style="text-align: center; padding: 60px;">
    <p style="font-size: 1.2rem; color: var(--gray-500);">No articles found.</p>
    <%= link_to "Create your first article", new_article_path, class: "btn btn-primary", style: "margin-top: 20px;" %>
  </div>
<% end %>
